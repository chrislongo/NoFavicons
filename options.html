<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
    <head>
    <title>No Favicons Extension Options</title>
    
    <style type="text/css"> 
        body{background-color:#fff;color:#000;font-family:Verdana, Arial, sans-serif;font-size:small;line-height:175%;margin:10px;}
        h1{font-size:small;font-weight:700;}
        img{vertical-align:middle;}
        #selection{margin-left:15px;}
    </style> 
    <script type="text/javascript">
    function save(values) 
    {
        localStorage["icon-type"] = values.type;

        if(values.image)
        {
            localStorage["custom-image"] = values.image;
        }
    }

    function load() 
    {
        var iconType = localStorage["icon-type"];
        var image = localStorage["custom-image"];
        
        if(!iconType) 
            iconType = "dashed";

        if(image)
             document.getElementById("newimage").src = image; 

        var select = document.getElementById("selection");

        for(var i = 0; i < select.children.length; i++) 
        {
            var child = select.children[i];

            if(child.value == iconType) 
            {
                child.checked = true;
                break;
            }
        }
    }

    function loadImageFile()
    {
        var reader = new FileReader();
        
        reader.onloadend = function(e)
        {
            // TODO: validate
            document.getElementById("newimage").src = e.target.result;
            document.getElementById("status").innerHTML = ""; 

            save({type:"custom", image:e.target.result});
        };

        document.getElementById("customradio").checked = true;
        var file = document.getElementById("upload").files[0];
        reader.readAsDataURL(file);
    }
    </script>
</head>

<body onload="load()">
    <h1>Icon type to replace favicons with in tabs and bookmarks</h1>

    <div id="selection">
        <input type="radio" id="dashedradio" name="icon" value="dashed" onclick="save({type:this.value})"> Simple dashed outline: 
        <img src="image/dashed.png" alt=""/><br />
        <input type="radio" id="pageradio" name="icon" value="page" onclick="save({type:this.value})"> A clean white icon: 
        <img src="image/page.png" alt="" /><br />
        <input type="radio" id="defaultradio" name="icon" value="default" onclick="save({type:this.value})"> Chrome Default: 
        <img src="image/default.png" alt="" /><br />
        <input type="radio" id="noneradio" name="icon" value="none" onclick="save({type:this.value})"> Nothing (tab text may look a bit misaligned).<br />
        <input type="radio" id="customradio" name="icon" value="custom" onclick=""> Your own image
        <img id="newimage" src="" />
        <input id="upload" type="file" onchange="loadImageFile();" />
    </div>

    <div id="status">
    </div>
</body>
</html>
